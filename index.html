<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DigitalDeft</title>
    
    <!-- Preload critical font -->
    <link rel="preload" 
          href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" 
          as="style" 
          onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- Fallback for JS-disabled browsers -->
    <noscript>
        <link rel="stylesheet" 
              href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    </noscript>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div class="incognito-indicator">INCOGNITO MODE</div>
    
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1 class="app-title">DigitalDeft</h1>
            <div class="header-stats">
                <div class="stat-box">
                    <span class="stat-label">WPM</span>
                    <span id="wpm-display" class="stat-value">0</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label">Accuracy</span>
                    <span id="accuracy-display" class="stat-value">0%</span>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tab-navigation">
            <button class="tab-btn active" data-tab="dashboard">
                <svg class="tab-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 7V17C3 18.6569 4.34315 20 6 20H18C19.6569 20 21 18.6569 21 17V7C21 5.34315 19.6569 4 18 4H6C4.34315 4 3 5.34315 3 7Z"></path>
                    <path d="M3 7L12 13L21 7"></path>
                </svg>
                Dashboard
            </button>
            <button class="tab-btn" data-tab="test">
                <svg class="tab-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 20V4M18 10L12 4L6 10"></path>
                </svg>
                Test
            </button>
            <button class="tab-btn" data-tab="stats">
                <svg class="tab-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 20V10M18 20V4M6 20V16"></path>
                </svg>
                Statistics
            </button>
            <button class="tab-btn" data-tab="settings">
                <svg class="tab-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M12 1V6M12 18V23M4.22 4.22L6.89 6.89M17.11 17.11L19.78 19.78M1 12H6M18 12H23M4.22 19.78L6.89 17.11M17.11 6.89L19.78 4.22"></path>
                </svg>
                Settings
            </button>
        </nav>

        <!-- Tab Content Areas -->
        <main class="tab-content">
            <!-- Dashboard Tab -->
            <section id="dashboard" class="tab-pane active">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h2>Welcome to DigitalDeft</h2>
                        <p>Test your typing speed and accuracy with our modern, responsive application. Customize your tests and track your progress over time.</p>
                        <button id="quick-start-btn" class="btn btn-primary">Start Quick Test</button>
                    </div>
                    <div class="dashboard-card">
                        <h3>Recent Performance</h3>
                        <div id="recent-stats" class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Best WPM</span>
                                <span id="best-wpm" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Best Accuracy</span>
                                <span id="best-accuracy" class="stat-value">0%</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Tests Completed</span>
                                <span id="tests-completed" class="stat-value">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Focus Modes</h3>
                        <button id="zen-mode-btn" class="btn btn-secondary">Zen Mode</button>
                        <p class="help-text">Blank canvas for distraction-free typing practice</p>
                    </div>
                </div>
            </section>

            <!-- Test Tab -->
            <section id="test" class="tab-pane">
                <div class="test-container">
                    <div class="test-controls">
                        <div class="control-group">
                            <button id="start-test-btn" class="btn btn-primary">Start Test</button>
                            <button id="reset-test-btn" class="btn btn-secondary">Reset</button>
                            <button id="new-paragraph-btn" class="btn btn-secondary">New Paragraph</button>
                            <button id="focus-mode-btn" class="btn btn-secondary">Focus Mode</button>
                        </div>
                        <div class="timer-display">
                            <span id="timer">60</span>s
                        </div>
                    </div>
                    <div id="test-text" class="test-text-container">
                        <!-- Test text will be populated here -->
                    </div>
                    <textarea 
                        id="typing-input" 
                        class="typing-input" 
                        placeholder="Start typing here when the test begins..."
                        disabled
                    ></textarea>
                </div>
            </section>

            <!-- Statistics Tab -->
            <section id="stats" class="tab-pane">
                <div class="stats-container">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Overall Performance</h3>
                            <div class="stat-value-large" id="overall-wpm">0</div>
                            <p>Words Per Minute</p>
                        </div>
                        <div class="stat-card">
                            <h3>Accuracy Rate</h3>
                            <div class="stat-value-large" id="overall-accuracy">0%</div>
                            <p>Success Rate</p>
                        </div>
                        <div class="stat-card">
                            <h3>Tests Taken</h3>
                            <div class="stat-value-large" id="total-tests">0</div>
                            <p>Sessions</p>
                        </div>
                        <div class="stat-card">
                            <h3>Best Performance</h3>
                            <div class="stat-value-large" id="best-performance">0</div>
                            <p>WPM Record</p>
                        </div>
                    </div>
                    
                    <div class="history-section">
                        <h3>Recent Test History</h3>
                        <div id="history-list" class="history-list">
                            <!-- History items will be populated here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Settings Tab -->
            <section id="settings" class="tab-pane">
                <div class="settings-container">
                    <div class="setting-group">
                        <h3>Test Configuration</h3>
                        
                        <div class="setting-item">
                            <label for="test-mode">Test Mode</label>
                            <select id="test-mode" class="form-select">
                                <option value="time">Time-based</option>
                                <option value="words">Word Count</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label for="time-limit">Time Limit (seconds)</label>
                            <input type="range" id="time-limit" class="form-slider" min="15" max="300" value="60">
                            <span id="time-limit-value" class="slider-value">60</span>
                        </div>
                        
                        <div class="setting-item">
                            <label for="word-count">Word Count</label>
                            <input type="range" id="word-count" class="form-slider" min="10" max="500" value="100">
                            <span id="word-count-value" class="slider-value">100</span>
                        </div>
                        
                        <div class="setting-item">
                            <label for="difficulty">Difficulty Level</label>
                            <select id="difficulty" class="form-select">
                                <option value="beginner">Beginner</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Advanced</option>
                                <option value="expert">Expert</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Content Type</h3>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="include-punctuation" checked>
                                Include Punctuation
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="include-numbers" checked>
                                Include Numbers
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="include-symbols">
                                Include Symbols
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="programming-mode">
                                Programming Language Snippets
                            </label>
                        </div>
                        
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="long-words-mode">
                                Long Words
                            </label>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Custom Text</h3>
                        <textarea id="custom-text" class="form-textarea" placeholder="Enter your own text to practice..."></textarea>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Appearance</h3>
                        
                        <div class="setting-item">
                            <label for="font-size">Font Size</label>
                            <input type="range" id="font-size" class="form-slider" min="14" max="24" value="18">
                            <span id="font-size-value" class="slider-value">18px</span>
                        </div>
                        
                        <div class="setting-item">
                            <label for="theme">Theme</label>
                            <select id="theme" class="form-select">
                                <option value="dark">Dark Mode</option>
                                <option value="light">Light Mode</option>
                            </select>
                        </div>
                        
                        <div class="setting-item">
                            <label for="stats-refresh">Stats Refresh Rate</label>
                            <select id="stats-refresh" class="form-select">
                                <option value="50">Fast (50ms)</option>
                                <option value="150" selected>Normal (150ms)</option>
                                <option value="300">Smooth (300ms)</option>
                                <option value="0">Instant (no debounce)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Audio Feedback</h3>
                        
                        <div class="setting-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="typing-sound-toggle">
                                Enable Typing Sounds
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <label for="typing-sound-volume">Volume</label>
                            <input type="range" id="typing-sound-volume" class="form-slider" min="0" max="1" step="0.1" value="0.5">
                            <span id="typing-sound-volume-value" class="slider-value">50%</span>
                        </div>
                    </div>
                    
                    <div class="setting-group">
                        <h3>Privacy</h3>
                        
                        <div class="setting-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="incognito-mode">
                                <strong>Incognito Mode</strong> - Don't save test results or settings
                            </label>
                            <p class="help-text" style="margin-top: var(--spacing-sm);">
                                All data will be discarded when you leave or refresh the page.
                            </p>
                        </div>
                    </div>

                    <!-- Backup & Restore Section -->
                    <div class="setting-group">
                        <h3>Backup & Restore</h3>
                        
                        <div class="setting-item">
                            <button id="export-data-btn" class="btn btn-primary" style="width: 100%;">Export All Data</button>
                            <p class="help-text" style="margin-top: var(--spacing-sm); font-size: 0.875rem; color: var(--text-gray);">
                                Download your settings and test history as a JSON file.
                            </p>
                        </div>
                        
                        <div class="setting-item">
                            <label for="import-data" class="btn btn-secondary" style="display: block; text-align: center; cursor: pointer;">
                                Import Data
                            </label>
                            <input type="file" id="import-data" accept=".json" style="display: none;" />
                            <p class="help-text" style="margin-top: var(--spacing-sm); font-size: 0.875rem; color: var(--text-gray);">
                                Upload a previously exported JSON file to restore your data.
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="app.js"></script>
</body>
</html>